# SQL-Pizza-Sales-Project

# Pizza Sales SQL Queries

Welcome to the Pizza Sales SQL Queries repository! This repository contains SQL scripts for managing and analyzing a pizza sales database. It includes scripts for creating the database, defining tables, and performing various analyses on the data.

## Table of Contents

- [Overview](#overview)
- [Database Schema](#database-schema)
- [Data Exploration Queries](#data-exploration-queries)
- [Analysis Queries](#analysis-queries)
- [Usage](#usage)
- [Contributing](#contributing)
- [License](#license)
- [Contact](#contact)

## Overview

This repository provides SQL scripts for:
- Creating and setting up a `pizza_sales` database.
- Defining tables for customers, pizzas, orders, and order items.
- Performing data exploration and analysis on pizza sales data.

## Database Schema

The following tables are defined in the `pizza_sales` database:

### Customers Table

Stores customer information.

```sql
CREATE TABLE Customers (
    CustomerID INT PRIMARY KEY,
    FirstName VARCHAR(50) NOT NULL,
    LastName VARCHAR(50) NOT NULL,
    Email VARCHAR(100) NOT NULL UNIQUE,
    PhoneNumber VARCHAR(20),
    Address VARCHAR(100),
    City VARCHAR(50),
    State CHAR(2),
    ZipCode VARCHAR(10),
    JoinDate DATE
);
```
### Pizzas Table

Stores details about different pizzas.

```sql
CREATE TABLE Pizzas (
    PizzaID INT PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Size VARCHAR(20) NOT NULL,
    Price DECIMAL(10, 2) NOT NULL,
    Category VARCHAR(20) NOT NULL
);
```
### Orders Table

Stores information about customer orders

```sql
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT NOT NULL,
    OrderDate DATE NOT NULL,
    TotalAmount DECIMAL(10, 2) NOT NULL,
    DeliveryAddress VARCHAR(100),
    Status VARCHAR(20),
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
);
```
### Order Items Table

Stores details about the items in each order.

```sql
CREATE TABLE OrderItems (
    OrderID INT NOT NULL,
    PizzaID INT NOT NULL,
    Quantity INT NOT NULL,
    Price DECIMAL(10, 2) NOT NULL,
    PRIMARY KEY (OrderID, PizzaID),
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID),
    FOREIGN KEY (PizzaID) REFERENCES Pizzas(PizzaID)
);
```
## Data Exploration Queries

These queries help in exploring the data and understanding the contents of the tables.

### Query 1: Number of Customers
```sql
SELECT count(*) AS Cust_count FROM customers;
```

### Query 2: Types of Pizzas and Categories
```sql
SELECT Name, Category FROM pizzas
ORDER BY Category;
```

### Query 3: Total Number of Orders
```sql
SELECT count(orderid) AS Order_Count
FROM orders;
```
## Analysis Queries

These queries provide insights and analysis based on the pizza sales data.

### Q1: Retrieve Customer Names and Email Addresses
```sql
SELECT FirstName,LastName, Email FROM customers;
```

### Q2: Find all orders with a total amount greater than $150. Include FirstName ,LastName,OrderID, CustomerID, and TotalAmount in the results.
```sql
SELECT 
	ord.CustomerID,
	FirstName ,
	LastName,
	ord.OrderID,
	ord.TotalAmount 
FROM orders AS ord
JOIN customers AS cst
ON ord.CustomerID = cst.CustomerID
WHERE TotalAmount > 150;
```

### Q3: Calculate the total revenue generated for each customer where the total order is greater than 4. Include CustomerID, TotalOrders, and TotalRevenue in the results.
```sql
SELECT 
	CustomerID,
	count(OrderID)AS total_orders,
    	sum(TotalAmount)AS Total_revenue
FROM orders
GROUP BY CustomerID
HAVING total_orders > 4;
```

### Q4: Find the average price of pizzas in each category. Include Category and AveragePrice in the results.
```sql
SELECT
	Category,
	avg(price) AS avg_price
FROM pizzas
GROUP BY Category;
```
### Q5: Calculate the total revenue and total quantity for each type of pizza. Include the pizza name, size, category, Total revenue generated and Total quantity sold by each pizza type.
```sql
SELECT 
    P.Name,
    P.Size,
    p.category ,
    SUM(P.Price) AS TotalRevenue,
    SUM(oi.Quantity) AS TotalQuantity
FROM OrderItems AS oi
JOIN
    Pizzas AS P ON oi.PizzaID = P.PizzaID
GROUP BY 
	P.Name , P.Size ,p.category , P.Price;
```
### Q6: Retrieve the highest priced pizza in each category. Include Category, PizzaName, and Price in the results.
```sql
SELECT p.Category, 
       p.Name AS PizzaName, 
       p.Price
FROM Pizzas p
JOIN (
    SELECT Category, 
           MAX(Price) AS MaxPrice
    FROM Pizzas
    GROUP BY Category
) max_p
ON p.Category = max_p.Category AND p.Price = max_p.MaxPrice;
```
### Q7:Find the total revenue generated by month for the current year. Include Month and TotalRevenue in the results.
```sql
SELECT 
    MONTHNAME(OrderDate) AS CY_Month,
    SUM(TotalAmount) AS TotalRevenue
FROM orders
WHERE YEAR(orderdate) = 2024
GROUP BY CY_Month;
```
